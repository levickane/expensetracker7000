<div class="row">
  <div class="col-auto">
    <h2>Welcome, {{username}}!</h2>
    {{#each cleaneduparray as |clean|}}
    <p>{{clean.amount}}</p>
    {{/each}}
  </div>
</div>

<div class="jumbotron jumbotron-fluid nav-style">
    <div class="container">
      <h1 class="display-2">Expense Tracker 7000</h1>
      <p class="lead">Start Saving Money The Smart Way!</p>
    </div>
  </div>
  <!-- Expense tracker area -->
  <div class="container">
    <div class="row">
      <div class="col-6">
      <canvas id="myChart" width="200" height="200"></canvas>
      </div>
      <div class="col-6">
        {{#if expenses.length}}
  <div class="col-md-6 project-list">
    <h3>Expenses:</h3>

    {{#each expenses as |expense|}}
    <div class="row mb-2">
      <div class="col-md-8">
        <h4><a href="/project/{{expense.id}}">{{expense.username}}</a></h4>
      </div>
      <div class="col-md-4">
        <button class="btn btn-sm btn-danger" data-id="{{expense.id}}">DELETE</button>
      </div>
    </div>
    {{/each}}
  </div>
  {{/if}}
</div>
      </div>
    </div>
  </div>
  <!-- Expense tracker area -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>


<script>
    $.ajax({
        url:"/profiledata",
method:"GET"    }).then(function(data){
console.log(data);
const names = []
const amounts =[]
for(let i=0; i<data.length; i++){
names.push(data[i].name)
amounts.push(data[i].amount)
}
console.log(names)
    
const chartData = {
    Names:names,
    Amounts:amounts
};

let lineChart = $('#myChart').html();
let lineChartScript = Handlebars.compile(lineChart);
let linehtml = lineChartScript(chartData);
$(document.body).append(linehtml);

var ctx = document.getElementById('myChart').getContext('2d');
var chart = new Chart(ctx, {
   type: 'line',
   data: {
      labels:  chartData.Names, 
      datasets: [
        {
          label: "Order Amount",
          fill: false,
          lineTension: 0,
          borderColor: "#0d6efd",
          data:  chartData.Amounts 
        }
      ]
   } 
});
});



</script>
<script src="./js/profile.js"></script>
